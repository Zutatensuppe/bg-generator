import{d as T,r as d,c as v,a as s,n as O,o as w,b as V,e as L,w as h,v as f,f as D,F as I,g as E,h as _,i as b,j as N}from"./vendor.07388c62.js";const M=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=n(l);fetch(l.href,i)}};M();var W=(e,t)=>{const n=e.__vccOpts||e;for(const[r,l]of t)n[r]=l;return n};const H=T({setup(){const e=d([]),t=d(!1);return{previewUrls:e,droppable:t}},mounted(){window.addEventListener("dragover",this.onDragover),window.addEventListener("drop",this.onDrop)},unmounted(){window.removeEventListener("dragover",this.onDragover),window.removeEventListener("drop",this.onDrop)},methods:{reset(){this.previewUrls=[],this.droppable=!1},onFileSelect(e){const t=e.target;if(!t.files)return;const n=[];for(let r=0;r<t.files.length;r++)n.push(t.files[r]);this.preview(n)},async preview(e){let t=[];for(let n of e)t.push(new Promise(r=>{const l=new FileReader;l.readAsDataURL(n),l.onload=i=>{r(i.target.result)}}));this.previewUrls=await Promise.all(t),this.$emit("selected",this.previewUrls)},imagesFromDragEvt(e){var r;const t=(r=e.dataTransfer)==null?void 0:r.items;if(!t||t.length===0)return[];const n=[];for(let l=0;l<t.length;l++)t[l].type.startsWith("image/")&&n.push(t[l]);return n},onDrop(e){this.droppable=!1;const t=this.imagesFromDragEvt(e);if(t.length===0)return!1;const n=[];for(const r of t){const l=r.getAsFile();l&&n.push(l)}return n.length===0||(this.preview(n),e.preventDefault()),!1},onDragover(e){return this.imagesFromDragEvt(e).length===0||(this.droppable=!0,e.preventDefault()),!1},onDragleave(){this.droppable=!1}}}),P=s("span",{class:"button is-small"},"Add File",-1);function R(e,t,n,r,l,i){return w(),v("div",{class:O(["image-select",{droppable:e.droppable}])},[s("div",{class:"drop-target",onDragleave:t[0]||(t[0]=(...a)=>e.onDragleave&&e.onDragleave(...a))},null,32),s("div",null,[s("label",null,[s("input",{type:"file",style:{display:"none"},onChange:t[1]||(t[1]=(...a)=>e.onFileSelect&&e.onFileSelect(...a)),accept:"image/*"},null,32),P])])],2)}var X=W(H,[["render",R]]);const B=async e=>new Promise(t=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>{t(n)},n.src=e}),Y=e=>{var t=Math.PI;return e*(t/180)};function j(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}const q=T({components:{ImageSelect:X},setup(){const e=d([]),t=d(!1),n=d(""),r=d("#000000"),l=d(150),i=d(1280),a=d(720),o=d(50),c=d(!0),y=d(!0),g=d(!1);return{urls:e,wantToAddUrls:t,inputUrl:n,bgColor:r,spacing:l,canvasWidth:i,canvasHeight:a,imagesSize:o,randomizeOrder:c,randomizeAngle:y,tryToWrapAround:g}},methods:{removeUrl(e){this.urls=this.urls.filter((t,n)=>e!==n)},addUrlsStr(){const e=this.inputUrl.split(/[\n\r]+/).filter(t=>!!t);this.urls.push(...e)},onImageSelected(e){this.urls.push(...e),this.$refs.imageSelect.reset()},async generate(){const e=this.$refs.canvas;if(!e)return;const t=e.getContext("2d");if(!t)return;const n=parseInt(`${this.imagesSize}`,10),r=parseInt(`${this.spacing}`,10);e.width=parseInt(`${this.canvasWidth}`,10),e.height=parseInt(`${this.canvasHeight}`,10),t.fillStyle=this.bgColor,t.fillRect(0,0,e.width,e.height);const l=[];for(let g of this.urls)l.push(await B(g));let i=0,a=0;const o=n;let c=this.tryToWrapAround?0:-r,y=this.tryToWrapAround?0:-r;for(let g=c;g<e.height;g+=r){const u=g+o,F=a%2===0?r/2:0;for(let A=y;A<e.width;A+=r){const p=A+F+o;i%this.urls.length===0&&this.randomizeOrder&&j(l);const m=l[i%this.urls.length],S=this.randomizeAngle?Y(Math.random()*360):0,$=[[p,u]];this.tryToWrapAround&&$.push([p+e.width,u],[p-e.width,u],[p,u+e.height],[p,u-e.height],[p+e.width,u+e.height],[p-e.width,u-e.height],[p+e.width,u-e.height],[p-e.width,u+e.height]);let k,U;m.width<m.height?(k=n,U=n*m.height/m.width):(U=n,k=n*m.width/m.height);for(let[C,z]of $)t.save(),t.translate(C,z),t.rotate(S),t.drawImage(m,-k/2,-U/2,k,U),t.rotate(-S),t.translate(-C,-z),t.restore();i++}a++}}}}),G={class:"card"},K={class:"panel-block"},J=b(" Add files by clicking "),Q=b(", dragging images on the browser, or by "),Z=b(". "),x={key:0,class:"fake-panel-block"},ee=b(" Note: This may not always work for all external urls. "),te=s("br",null,null,-1),se={key:1,class:"fake-panel-block"},ne=b(" Click on an image to remove it. "),le=s("br",null,null,-1),oe=["src","onClick"],re={class:"panel-block"},ie={class:"table"},ae=s("td",null,"bgColor",-1),de=s("td",null,null,-1),ue=s("td",null,"imagesSize",-1),pe=s("td",null," Images are sized so that their smallest side becomes this value. They retain their original aspect ratio.",-1),he=s("td",null,"spacing",-1),ce=s("td",null,null,-1),ge=s("td",null,"canvasWidth",-1),me=s("td",null,null,-1),fe=s("td",null,"canvasHeight",-1),ve=s("td",null,null,-1),we=s("td",null,"randomizeOrder",-1),be=s("td",null,null,-1),ye=s("td",null,"randomizeAngle",-1),ke=s("td",null,null,-1),Ue=s("td",null,"tryToWrapAround",-1),Ae=s("td",null," Create a background that can be repeated forever. For this to work, the canvas width/height should be equal, and a multiple of the spacing.",-1),_e={class:"panel-block"},Se={ref:"canvas"};function $e(e,t,n,r,l,i){const a=V("image-select");return w(),v(I,null,[s("div",G,[s("div",K,[J,L(a,{onSelected:e.onImageSelected,ref:"imageSelect"},null,8,["onSelected"]),Q,s("span",{class:"button is-small",onClick:t[0]||(t[0]=o=>e.wantToAddUrls=!e.wantToAddUrls)},"adding urls"),Z]),e.wantToAddUrls?(w(),v("div",x,[ee,te,h(s("textarea",{class:"textarea is-small mb-1","onUpdate:modelValue":t[1]||(t[1]=o=>e.inputUrl=o)},null,512),[[f,e.inputUrl]]),s("span",{class:"button is-small",onClick:t[2]||(t[2]=(...o)=>e.addUrlsStr&&e.addUrlsStr(...o))},"Add URL(s)")])):D("",!0),e.urls.length?(w(),v("div",se,[ne,le,(w(!0),v(I,null,E(e.urls,(o,c)=>(w(),v("img",{key:c,width:"100",src:e.urls[c],onClick:y=>e.removeUrl(c),class:"is-clickable mr-1"},null,8,oe))),128))])):D("",!0),s("div",re,[s("table",ie,[s("tr",null,[ae,s("td",null,[h(s("input",{class:"input is-small",type:"color","onUpdate:modelValue":t[3]||(t[3]=o=>e.bgColor=o)},null,512),[[f,e.bgColor]])]),de]),s("tr",null,[ue,s("td",null,[h(s("input",{class:"input is-small","onUpdate:modelValue":t[4]||(t[4]=o=>e.imagesSize=o)},null,512),[[f,e.imagesSize]])]),pe]),s("tr",null,[he,s("td",null,[h(s("input",{class:"input is-small","onUpdate:modelValue":t[5]||(t[5]=o=>e.spacing=o)},null,512),[[f,e.spacing]])]),ce]),s("tr",null,[ge,s("td",null,[h(s("input",{class:"input is-small","onUpdate:modelValue":t[6]||(t[6]=o=>e.canvasWidth=o)},null,512),[[f,e.canvasWidth]])]),me]),s("tr",null,[fe,s("td",null,[h(s("input",{class:"input is-small","onUpdate:modelValue":t[7]||(t[7]=o=>e.canvasHeight=o)},null,512),[[f,e.canvasHeight]])]),ve]),s("tr",null,[we,s("td",null,[h(s("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=o=>e.randomizeOrder=o)},null,512),[[_,e.randomizeOrder]])]),be]),s("tr",null,[ye,s("td",null,[h(s("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=o=>e.randomizeAngle=o)},null,512),[[_,e.randomizeAngle]])]),ke]),s("tr",null,[Ue,s("td",null,[h(s("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=o=>e.tryToWrapAround=o)},null,512),[[_,e.tryToWrapAround]])]),Ae])])]),s("div",_e,[s("span",{class:"button is-small",onClick:t[11]||(t[11]=(...o)=>e.generate&&e.generate(...o))},"Generate!!!!")])]),s("canvas",Se,null,512)],64)}var Ce=W(q,[["render",$e]]);const ze=async()=>{N(Ce).mount("#app")};ze();
