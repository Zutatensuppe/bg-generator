import{d as z,r as d,c as m,a as s,n as O,o as f,b as V,e as L,w as c,v as g,f as $,F as C,g as E,h as U,i as b,j as N}from"./vendor.07388c62.js";const M=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}};M();var I=(e,t)=>{const o=e.__vccOpts||e;for(const[r,n]of t)o[r]=n;return o};const H=z({setup(){const e=d([]),t=d(!1);return{previewUrls:e,droppable:t}},mounted(){window.addEventListener("dragover",this.onDragover),window.addEventListener("drop",this.onDrop)},unmounted(){window.removeEventListener("dragover",this.onDragover),window.removeEventListener("drop",this.onDrop)},methods:{reset(){this.previewUrls=[],this.droppable=!1},onFileSelect(e){const t=e.target;if(!t.files)return;const o=[];for(let r=0;r<t.files.length;r++)o.push(t.files[r]);this.preview(o)},async preview(e){let t=[];for(let o of e)t.push(new Promise(r=>{const n=new FileReader;n.readAsDataURL(o),n.onload=i=>{r(i.target.result)}}));this.previewUrls=await Promise.all(t),this.$emit("selected",this.previewUrls)},imagesFromDragEvt(e){var r;const t=(r=e.dataTransfer)==null?void 0:r.items;if(!t||t.length===0)return[];const o=[];for(let n=0;n<t.length;n++)t[n].type.startsWith("image/")&&o.push(t[n]);return o},onDrop(e){console.log("onDrop"),this.droppable=!1;const t=this.imagesFromDragEvt(e);if(t.length===0)return!1;const o=[];for(const r of t){const n=r.getAsFile();n&&o.push(n)}return o.length===0||(this.preview(o),e.preventDefault()),!1},onDragover(e){return console.log("onDragover"),this.imagesFromDragEvt(e).length===0||(this.droppable=!0,e.preventDefault()),!1},onDragleave(){console.log("onDragleave"),this.droppable=!1}}}),P=s("span",{class:"button is-small"},"Add File",-1);function R(e,t,o,r,n,i){return f(),m("div",{class:O(["image-select",{droppable:e.droppable}])},[s("div",{class:"drop-target",onDragleave:t[0]||(t[0]=(...a)=>e.onDragleave&&e.onDragleave(...a))},null,32),s("div",null,[s("label",null,[s("input",{type:"file",style:{display:"none"},onChange:t[1]||(t[1]=(...a)=>e.onFileSelect&&e.onFileSelect(...a)),accept:"image/*"},null,32),P])])],2)}var X=I(H,[["render",R]]);const B=async e=>new Promise(t=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{t(o)},o.src=e}),Y=e=>{var t=Math.PI;return e*(t/180)};function j(e){for(let t=e.length-1;t>0;t--){const o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e}const q=z({components:{ImageSelect:X},setup(){const e=d([]),t=d(!1),o=d(""),r=d("#000000"),n=d(150),i=d(1280),a=d(720),l=d(50),h=d(!0),v=d(!0),y=d(!1);return{urls:e,wantToAddUrls:t,inputUrl:o,bgColor:r,spacing:n,canvasWidth:i,canvasHeight:a,imagesSize:l,randomizeOrder:h,randomizeAngle:v,tryToWrapAround:y}},methods:{removeUrl(e){this.urls=this.urls.filter((t,o)=>e!==o)},addUrlsStr(){const e=this.inputUrl.split(/[\n\r]+/).filter(t=>!!t);this.urls.push(...e)},onImageSelected(e){this.urls.push(...e),this.$refs.imageSelect.reset()},async generate(){const e=this.$refs.canvas;if(!e)return;const t=e.getContext("2d");if(!t)return;const o=parseInt(`${this.imagesSize}`,10),r=parseInt(`${this.spacing}`,10),n=o,i=o;e.width=parseInt(`${this.canvasWidth}`,10),e.height=parseInt(`${this.canvasHeight}`,10),t.fillStyle=this.bgColor,t.fillRect(0,0,e.width,e.height);const a=[];for(let w of this.urls)a.push(await B(w));let l=0,h=0;const v=o;let y=this.tryToWrapAround?0:-r,T=this.tryToWrapAround?0:-r;for(let w=y;w<e.height;w+=r){const u=w+v,W=h%2===0?r/2:0;for(let k=T;k<e.width;k+=r){const p=k+W+v;l%this.urls.length===0&&this.randomizeOrder&&j(a);const F=a[l%this.urls.length],A=this.randomizeAngle?Y(Math.random()*360):0,_=[[p,u]];this.tryToWrapAround&&_.push([p+e.width,u],[p-e.width,u],[p,u+e.height],[p,u-e.height],[p+e.width,u+e.height],[p-e.width,u-e.height],[p+e.width,u-e.height],[p-e.width,u+e.height]);for(let[S,D]of _)t.save(),t.translate(S,D),t.rotate(A),t.drawImage(F,-n/2,-i/2,n,i),t.rotate(-A),t.translate(-S,-D),t.restore();l++}h++}}}}),G={class:"card"},K={class:"panel-block"},J=b(" Add files by clicking "),Q=b(", dragging images on the browser, or by "),Z=b(". "),x={key:0,class:"fake-panel-block"},ee=b(" Note: This may not always work for all external urls. "),te=s("br",null,null,-1),se={key:1,class:"fake-panel-block"},ne=b(" Click on an image to remove it. "),oe=s("br",null,null,-1),le=["src","onClick"],re={class:"panel-block"},ie={class:"table"},ae=s("td",null,"bgColor",-1),de=s("td",null,null,-1),ue=s("td",null,"imagesSize",-1),pe=s("td",null,null,-1),ce=s("td",null,"spacing",-1),he=s("td",null,null,-1),ge=s("td",null,"canvasWidth",-1),me=s("td",null,null,-1),fe=s("td",null,"canvasHeight",-1),ve=s("td",null,null,-1),we=s("td",null,"randomizeOrder",-1),be=s("td",null,null,-1),ye=s("td",null,"randomizeAngle",-1),ke=s("td",null,null,-1),Ue=s("td",null,"tryToWrapAround",-1),Ae=s("td",null," Create a background that can be repeated forever. For this to work, the canvas width/height should be equal, and a multiple of the spacing.",-1),_e={class:"panel-block"},Se={ref:"canvas"};function De(e,t,o,r,n,i){const a=V("image-select");return f(),m(C,null,[s("div",G,[s("div",K,[J,L(a,{onSelected:e.onImageSelected,ref:"imageSelect"},null,8,["onSelected"]),Q,s("span",{class:"button is-small",onClick:t[0]||(t[0]=l=>e.wantToAddUrls=!e.wantToAddUrls)},"adding urls"),Z]),e.wantToAddUrls?(f(),m("div",x,[ee,te,c(s("textarea",{class:"textarea is-small mb-1","onUpdate:modelValue":t[1]||(t[1]=l=>e.inputUrl=l)},null,512),[[g,e.inputUrl]]),s("span",{class:"button is-small",onClick:t[2]||(t[2]=(...l)=>e.addUrlsStr&&e.addUrlsStr(...l))},"Add URL(s)")])):$("",!0),e.urls.length?(f(),m("div",se,[ne,oe,(f(!0),m(C,null,E(e.urls,(l,h)=>(f(),m("img",{key:h,width:"100",src:e.urls[h],onClick:v=>e.removeUrl(h),class:"is-clickable mr-1"},null,8,le))),128))])):$("",!0),s("div",re,[s("table",ie,[s("tr",null,[ae,s("td",null,[c(s("input",{class:"input is-small",type:"color","onUpdate:modelValue":t[3]||(t[3]=l=>e.bgColor=l)},null,512),[[g,e.bgColor]])]),de]),s("tr",null,[ue,s("td",null,[c(s("input",{class:"input is-small","onUpdate:modelValue":t[4]||(t[4]=l=>e.imagesSize=l)},null,512),[[g,e.imagesSize]])]),pe]),s("tr",null,[ce,s("td",null,[c(s("input",{class:"input is-small","onUpdate:modelValue":t[5]||(t[5]=l=>e.spacing=l)},null,512),[[g,e.spacing]])]),he]),s("tr",null,[ge,s("td",null,[c(s("input",{class:"input is-small","onUpdate:modelValue":t[6]||(t[6]=l=>e.canvasWidth=l)},null,512),[[g,e.canvasWidth]])]),me]),s("tr",null,[fe,s("td",null,[c(s("input",{class:"input is-small","onUpdate:modelValue":t[7]||(t[7]=l=>e.canvasHeight=l)},null,512),[[g,e.canvasHeight]])]),ve]),s("tr",null,[we,s("td",null,[c(s("input",{type:"checkbox","onUpdate:modelValue":t[8]||(t[8]=l=>e.randomizeOrder=l)},null,512),[[U,e.randomizeOrder]])]),be]),s("tr",null,[ye,s("td",null,[c(s("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=l=>e.randomizeAngle=l)},null,512),[[U,e.randomizeAngle]])]),ke]),s("tr",null,[Ue,s("td",null,[c(s("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=l=>e.tryToWrapAround=l)},null,512),[[U,e.tryToWrapAround]])]),Ae])])]),s("div",_e,[s("span",{class:"button is-small",onClick:t[11]||(t[11]=(...l)=>e.generate&&e.generate(...l))},"Generate!!!!")])]),s("canvas",Se,null,512)],64)}var $e=I(q,[["render",De]]);const Ce=async()=>{N($e).mount("#app")};Ce();
