import{d as O,r as d,c as v,a as s,n as F,o as b,b as L,e as E,w as u,v as f,f as I,F as T,g as N,h as S,i as w,j as M}from"./vendor.07388c62.js";const H=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function l(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=l(n);fetch(n.href,i)}};H();var V=(e,t)=>{const l=e.__vccOpts||e;for(const[r,n]of t)l[r]=n;return l};const P=O({setup(){const e=d([]),t=d(!1);return{previewUrls:e,droppable:t}},mounted(){window.addEventListener("dragover",this.onDragover),window.addEventListener("drop",this.onDrop)},unmounted(){window.removeEventListener("dragover",this.onDragover),window.removeEventListener("drop",this.onDrop)},methods:{reset(){this.previewUrls=[],this.droppable=!1},onFileSelect(e){const t=e.target;if(!t.files)return;const l=[];for(let r=0;r<t.files.length;r++)l.push(t.files[r]);this.preview(l)},async preview(e){let t=[];for(let l of e)t.push(new Promise(r=>{const n=new FileReader;n.readAsDataURL(l),n.onload=i=>{r(i.target.result)}}));this.previewUrls=await Promise.all(t),this.$emit("selected",this.previewUrls)},imagesFromDragEvt(e){var r;const t=(r=e.dataTransfer)==null?void 0:r.items;if(!t||t.length===0)return[];const l=[];for(let n=0;n<t.length;n++)t[n].type.startsWith("image/")&&l.push(t[n]);return l},onDrop(e){this.droppable=!1;const t=this.imagesFromDragEvt(e);if(t.length===0)return!1;const l=[];for(const r of t){const n=r.getAsFile();n&&l.push(n)}return l.length===0||(this.preview(l),e.preventDefault()),!1},onDragover(e){return this.imagesFromDragEvt(e).length===0||(this.droppable=!0,e.preventDefault()),!1},onDragleave(){this.droppable=!1}}}),R=s("span",{class:"button is-small"},"Add File",-1);function X(e,t,l,r,n,i){return b(),v("div",{class:F(["image-select",{droppable:e.droppable}])},[s("div",{class:"drop-target",onDragleave:t[0]||(t[0]=(...a)=>e.onDragleave&&e.onDragleave(...a))},null,32),s("div",null,[s("label",null,[s("input",{type:"file",style:{display:"none"},onChange:t[1]||(t[1]=(...a)=>e.onFileSelect&&e.onFileSelect(...a)),accept:"image/*"},null,32),R])])],2)}var q=V(P,[["render",X]]);const B=async e=>new Promise(t=>{const l=new Image;l.crossOrigin="anonymous",l.onload=()=>{t(l)},l.src=e}),Y=e=>{var t=Math.PI;return e*(t/180)};function j(e){for(let t=e.length-1;t>0;t--){const l=Math.floor(Math.random()*(t+1));[e[t],e[l]]=[e[l],e[t]]}return e}const G=O({components:{ImageSelect:q},setup(){const e=d([]),t=d(!1),l=d(""),r=d("#000000"),n=d(150),i=d(1280),a=d(720),o=d(50),c=d(!0),y=d(!0),U=d(!1),m=d(100);return{urls:e,wantToAddUrls:t,inputUrl:l,bgColor:r,spacing:n,canvasWidth:i,canvasHeight:a,imagesSize:o,imagesAlpha:m,randomizeOrder:c,randomizeAngle:y,tryToWrapAround:U}},methods:{removeUrl(e){this.urls=this.urls.filter((t,l)=>e!==l)},addUrlsStr(){const e=this.inputUrl.split(/[\n\r]+/).filter(t=>!!t);this.urls.push(...e)},onImageSelected(e){this.urls.push(...e),this.$refs.imageSelect.reset()},async generate(){const e=this.$refs.canvas;if(!e)return;const t=e.getContext("2d");if(!t)return;const l=parseInt(`${this.imagesSize}`,10),r=parseInt(`${this.imagesAlpha}`,10)/100,n=parseInt(`${this.spacing}`,10);e.width=parseInt(`${this.canvasWidth}`,10),e.height=parseInt(`${this.canvasHeight}`,10),t.fillStyle=this.bgColor,t.fillRect(0,0,e.width,e.height);const i=[];for(let m of this.urls)i.push(await B(m));let a=0,o=0;const c=l;let y=this.tryToWrapAround?0:-n,U=this.tryToWrapAround?0:-n;for(let m=y;m<e.height;m+=n){const p=m+c,W=o%2===0?n/2:0;for(let _=U;_<e.width;_+=n){const h=_+W+c;a%this.urls.length===0&&this.randomizeOrder&&j(i);const g=i[a%this.urls.length],$=this.randomizeAngle?Y(Math.random()*360):0,C=[[h,p]];this.tryToWrapAround&&C.push([h+e.width,p],[h-e.width,p],[h,p+e.height],[h,p-e.height],[h+e.width,p+e.height],[h-e.width,p-e.height],[h+e.width,p-e.height],[h-e.width,p+e.height]);let A,k;g.width<g.height?(A=l,k=l*g.height/g.width):(k=l,A=l*g.width/g.height);for(let[z,D]of C)t.save(),t.globalAlpha=r,t.translate(z,D),t.rotate($),t.drawImage(g,-A/2,-k/2,A,k),t.rotate(-$),t.translate(-z,-D),t.restore();a++}o++}}}}),K={class:"card"},J={class:"panel-block"},Q=w(" Add files by clicking "),Z=w(", dragging images on the browser, or by "),x=w(". "),ee={key:0,class:"fake-panel-block"},te=w(" Note: This may not always work for all external urls. "),se=s("br",null,null,-1),ne={key:1,class:"fake-panel-block"},le=w(" Click on an image to remove it. "),oe=s("br",null,null,-1),re=["src","onClick"],ie={class:"panel-block"},ae={class:"table"},de=s("td",null,"bgColor",-1),ue=s("td",null,null,-1),pe=s("td",null,"imagesSize",-1),he=s("td",null," Images are sized so that their smallest side becomes this value. They retain their original aspect ratio.",-1),ce=s("td",null,"imagesAlpha",-1),me=s("td",null," Alpha of the images on the background (0 = Transparent, 100 = Opaque)",-1),ge=s("td",null,"spacing",-1),fe=s("td",null,null,-1),ve=s("td",null,"canvasWidth",-1),be=s("td",null,null,-1),we=s("td",null,"canvasHeight",-1),ye=s("td",null,null,-1),Ae=s("td",null,"randomizeOrder",-1),ke=s("td",null,null,-1),Ue=s("td",null,"randomizeAngle",-1),_e=s("td",null,null,-1),Se=s("td",null,"tryToWrapAround",-1),$e=s("td",null," Create a background that can be repeated forever. For this to work, the canvas width/height should be equal, and a multiple of the spacing.",-1),Ce={class:"panel-block"},ze={ref:"canvas"};function De(e,t,l,r,n,i){const a=L("image-select");return b(),v(T,null,[s("div",K,[s("div",J,[Q,E(a,{onSelected:e.onImageSelected,ref:"imageSelect"},null,8,["onSelected"]),Z,s("span",{class:"button is-small",onClick:t[0]||(t[0]=o=>e.wantToAddUrls=!e.wantToAddUrls)},"adding urls"),x]),e.wantToAddUrls?(b(),v("div",ee,[te,se,u(s("textarea",{class:"textarea is-small mb-1","onUpdate:modelValue":t[1]||(t[1]=o=>e.inputUrl=o)},null,512),[[f,e.inputUrl]]),s("span",{class:"button is-small",onClick:t[2]||(t[2]=(...o)=>e.addUrlsStr&&e.addUrlsStr(...o))},"Add URL(s)")])):I("",!0),e.urls.length?(b(),v("div",ne,[le,oe,(b(!0),v(T,null,N(e.urls,(o,c)=>(b(),v("img",{key:c,width:"100",src:e.urls[c],onClick:y=>e.removeUrl(c),class:"is-clickable mr-1"},null,8,re))),128))])):I("",!0),s("div",ie,[s("table",ae,[s("tr",null,[de,s("td",null,[u(s("input",{class:"input is-small",type:"color","onUpdate:modelValue":t[3]||(t[3]=o=>e.bgColor=o)},null,512),[[f,e.bgColor]])]),ue]),s("tr",null,[pe,s("td",null,[u(s("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>e.imagesSize=o)},null,512),[[f,e.imagesSize]])]),he]),s("tr",null,[ce,s("td",null,[u(s("input",{class:"input is-small",type:"number",min:"0",max:"100","onUpdate:modelValue":t[5]||(t[5]=o=>e.imageAlpha=o)},null,512),[[f,e.imageAlpha]])]),me]),s("tr",null,[ge,s("td",null,[u(s("input",{class:"input is-small","onUpdate:modelValue":t[6]||(t[6]=o=>e.spacing=o)},null,512),[[f,e.spacing]])]),fe]),s("tr",null,[ve,s("td",null,[u(s("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[7]||(t[7]=o=>e.canvasWidth=o)},null,512),[[f,e.canvasWidth]])]),be]),s("tr",null,[we,s("td",null,[u(s("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[8]||(t[8]=o=>e.canvasHeight=o)},null,512),[[f,e.canvasHeight]])]),ye]),s("tr",null,[Ae,s("td",null,[u(s("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=o=>e.randomizeOrder=o)},null,512),[[S,e.randomizeOrder]])]),ke]),s("tr",null,[Ue,s("td",null,[u(s("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=o=>e.randomizeAngle=o)},null,512),[[S,e.randomizeAngle]])]),_e]),s("tr",null,[Se,s("td",null,[u(s("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=o=>e.tryToWrapAround=o)},null,512),[[S,e.tryToWrapAround]])]),$e])])]),s("div",Ce,[s("span",{class:"button is-small",onClick:t[12]||(t[12]=(...o)=>e.generate&&e.generate(...o))},"Generate!!!!")])]),s("canvas",ze,null,512)],64)}var Ie=V(G,[["render",De]]);const Te=async()=>{M(Ie).mount("#app")};Te();
