import{d as U,r as d,c as h,a as t,n as O,o as v,b as F,e as L,w as p,v as f,F as y,f as V,g as k,h as D,i as E}from"./vendor.3c73d55c.js";const M=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};M();var $=(e,s)=>{const n=e.__vccOpts||e;for(const[r,o]of s)n[r]=o;return n};const _=U({setup(){const e=d([]),s=d(!1);return{previewUrls:e,droppable:s}},mounted(){window.addEventListener("dragover",this.onDragover),window.addEventListener("drop",this.onDrop)},unmounted(){window.removeEventListener("dragover",this.onDragover),window.removeEventListener("drop",this.onDrop)},methods:{reset(){this.previewUrls=[],this.droppable=!1},onFileSelect(e){const s=e.target;if(!s.files)return;const n=[];for(let r=0;r<s.files.length;r++)n.push(s.files[r]);this.preview(n)},async preview(e){let s=[];for(let n of e)s.push(new Promise(r=>{const o=new FileReader;o.readAsDataURL(n),o.onload=i=>{r(i.target.result)}}));this.previewUrls=await Promise.all(s),this.$emit("selected",this.previewUrls)},imagesFromDragEvt(e){var r;const s=(r=e.dataTransfer)==null?void 0:r.items;if(!s||s.length===0)return[];const n=[];for(let o=0;o<s.length;o++)s[o].type.startsWith("image/")&&n.push(s[o]);return n},onDrop(e){console.log("onDrop"),this.droppable=!1;const s=this.imagesFromDragEvt(e);if(s.length===0)return!1;const n=[];for(const r of s){const o=r.getAsFile();o&&n.push(o)}return n.length===0||(this.preview(n),e.preventDefault()),!1},onDragover(e){return console.log("onDragover"),this.imagesFromDragEvt(e).length===0||(this.droppable=!0,e.preventDefault()),!1},onDragleave(){console.log("onDragleave"),this.droppable=!1}}}),N=t("span",{class:"button is-small"},"Add File",-1);function P(e,s,n,r,o,i){return v(),h("div",{class:O(["image-select",{droppable:e.droppable}])},[t("div",{class:"drop-target",onDragleave:s[0]||(s[0]=(...a)=>e.onDragleave&&e.onDragleave(...a))},null,32),t("div",null,[t("label",null,[t("input",{type:"file",style:{display:"none"},onChange:s[1]||(s[1]=(...a)=>e.onFileSelect&&e.onFileSelect(...a)),accept:"image/*"},null,32),N])])],2)}var R=$(_,[["render",P]]);const B=async e=>new Promise(s=>{const n=new Image;n.crossOrigin="anonymous",n.onload=()=>{s(n)},n.src=e}),T=e=>{var s=Math.PI;return e*(s/180)};function X(e){for(let s=e.length-1;s>0;s--){const n=Math.floor(Math.random()*(s+1));[e[s],e[n]]=[e[n],e[s]]}return e}const W=U({components:{ImageSelect:R},setup(){const e=d([]),s=d(""),n=d("#000000"),r=d(150),o=d(600),i=d(50),a=d(!0),l=d(!0);return{urls:e,inputUrl:s,bgColor:n,spacing:r,canvasSize:o,imagesSize:i,randomizeOrder:a,randomizeAngle:l}},methods:{removeUrl(e){this.urls=this.urls.filter((s,n)=>e!==n)},addUrlsStr(){const e=this.inputUrl.split(/[\n\r]+/).filter(s=>!!s);this.urls.push(...e)},onImageSelected(e){this.urls.push(...e),this.$refs.imageSelect.reset()},async generate(){const e=this.$refs.canvas;if(!e)return;const s=e.getContext("2d");if(!s)return;const n=parseInt(`${this.spacing}`,10),r=parseInt(`${this.imagesSize}`,10),o=parseInt(`${this.imagesSize}`,10);e.width=parseInt(`${this.canvasSize}`,10),e.height=parseInt(`${this.canvasSize}`,10),s.fillStyle=this.bgColor,s.fillRect(0,0,e.width,e.height);const i=[];for(let g of this.urls)i.push(await B(g));let a=0,l=0;const m=n/4;for(let g=0;g<e.height;g+=n){const u=g+m,C=l%2===0?n/2:0;for(let S=0;S<e.width;S+=n){const c=S+C+m;a%this.urls.length===0&&this.randomizeOrder&&X(i);const I=i[a%this.urls.length],b=this.randomizeAngle?T(Math.random()*360):0,A=[[c,u],[c+this.canvasSize,u],[c-this.canvasSize,u],[c,u+this.canvasSize],[c,u-this.canvasSize],[c+this.canvasSize,u+this.canvasSize],[c-this.canvasSize,u-this.canvasSize],[c+this.canvasSize,u-this.canvasSize],[c-this.canvasSize,u+this.canvasSize]];for(let[z,w]of A)s.save(),s.translate(z,w),s.rotate(b),s.drawImage(I,-r/2,-o/2,r,o),s.rotate(-b),s.translate(-z,-w),s.restore();a++}l++}}}}),Y={class:"card"},j={class:"panel-block"},q=D(" Add files by clicking "),G=D(", dragging images on the browser, or by adding urls to the textarea (urls in textarea may not always work for all external urls). "),H={class:"fake-panel-block"},K=t("div",{class:"panel-block"}," Click on an image to remove it. ",-1),J={class:"panel-block"},Q=["src","onClick"],Z={class:"panel-block"},x=t("td",null,"bgColor",-1),ee=t("td",null,"imagesSize",-1),se=t("td",null,"spacing",-1),te=t("td",null,"canvasSize",-1),ne=t("td",null,"randomizeOrder",-1),oe=t("td",null,"randomizeAngle",-1),le={class:"panel-block"},re={ref:"canvas"};function ie(e,s,n,r,o,i){const a=F("image-select");return v(),h(y,null,[t("div",Y,[t("div",j,[q,L(a,{onSelected:e.onImageSelected,ref:"imageSelect"},null,8,["onSelected"]),G]),t("div",H,[p(t("textarea",{class:"textarea is-small mb-1","onUpdate:modelValue":s[0]||(s[0]=l=>e.inputUrl=l)},null,512),[[f,e.inputUrl]]),t("span",{class:"button is-small",onClick:s[1]||(s[1]=(...l)=>e.addUrlsStr&&e.addUrlsStr(...l))},"Add URL(s)")]),K,t("div",J,[(v(!0),h(y,null,V(e.urls,(l,m)=>(v(),h("img",{key:m,width:"100",src:e.urls[m],onClick:g=>e.removeUrl(m),class:"is-clickable mr-1"},null,8,Q))),128))]),t("div",Z,[t("table",null,[t("tr",null,[x,t("td",null,[p(t("input",{class:"input is-small",type:"color","onUpdate:modelValue":s[2]||(s[2]=l=>e.bgColor=l)},null,512),[[f,e.bgColor]])])]),t("tr",null,[ee,t("td",null,[p(t("input",{class:"input is-small","onUpdate:modelValue":s[3]||(s[3]=l=>e.imagesSize=l)},null,512),[[f,e.imagesSize]])])]),t("tr",null,[se,t("td",null,[p(t("input",{class:"input is-small","onUpdate:modelValue":s[4]||(s[4]=l=>e.spacing=l)},null,512),[[f,e.spacing]])])]),t("tr",null,[te,t("td",null,[p(t("input",{class:"input is-small","onUpdate:modelValue":s[5]||(s[5]=l=>e.canvasSize=l)},null,512),[[f,e.canvasSize]])])]),t("tr",null,[ne,t("td",null,[p(t("input",{type:"checkbox","onUpdate:modelValue":s[6]||(s[6]=l=>e.randomizeOrder=l)},null,512),[[k,e.randomizeOrder]])])]),t("tr",null,[oe,t("td",null,[p(t("input",{type:"checkbox","onUpdate:modelValue":s[7]||(s[7]=l=>e.randomizeAngle=l)},null,512),[[k,e.randomizeAngle]])])])])]),t("div",le,[t("span",{class:"button is-small",onClick:s[8]||(s[8]=(...l)=>e.generate&&e.generate(...l))},"Generate!!!!")])]),t("canvas",re,null,512)],64)}var ae=$(W,[["render",ie]]);const de=async()=>{E(ae).mount("#app")};de();
