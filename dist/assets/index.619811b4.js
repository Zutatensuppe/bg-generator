import{d as W,r as a,c as y,a as n,n as O,o as b,b as L,e as R,w as d,v as h,f as T,F as E,g as N,h as V,i as w,j as M}from"./vendor.07388c62.js";const P=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function o(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(l){if(l.ep)return;l.ep=!0;const r=o(l);fetch(l.href,r)}};P();var F=(e,t)=>{const o=e.__vccOpts||e;for(const[i,l]of t)o[i]=l;return o};const X=W({setup(){const e=a([]),t=a(!1);return{previewUrls:e,droppable:t}},mounted(){window.addEventListener("dragover",this.onDragover),window.addEventListener("drop",this.onDrop)},unmounted(){window.removeEventListener("dragover",this.onDragover),window.removeEventListener("drop",this.onDrop)},methods:{reset(){this.previewUrls=[],this.droppable=!1},onFileSelect(e){const t=e.target;if(!t.files)return;const o=[];for(let i=0;i<t.files.length;i++)o.push(t.files[i]);this.preview(o)},async preview(e){let t=[];for(let o of e)t.push(new Promise(i=>{const l=new FileReader;l.readAsDataURL(o),l.onload=r=>{i(r.target.result)}}));this.previewUrls=await Promise.all(t),this.$emit("selected",this.previewUrls)},imagesFromDragEvt(e){var i;const t=(i=e.dataTransfer)==null?void 0:i.items;if(!t||t.length===0)return[];const o=[];for(let l=0;l<t.length;l++)t[l].type.startsWith("image/")&&o.push(t[l]);return o},onDrop(e){this.droppable=!1;const t=this.imagesFromDragEvt(e);if(t.length===0)return!1;const o=[];for(const i of t){const l=i.getAsFile();l&&o.push(l)}return o.length===0||(this.preview(o),e.preventDefault()),!1},onDragover(e){return this.imagesFromDragEvt(e).length===0||(this.droppable=!0,e.preventDefault()),!1},onDragleave(){this.droppable=!1}}}),q=n("span",{class:"button is-small"},"Add File",-1);function B(e,t,o,i,l,r){return b(),y("div",{class:O(["image-select",{droppable:e.droppable}])},[n("div",{class:"drop-target",onDragleave:t[0]||(t[0]=(...u)=>e.onDragleave&&e.onDragleave(...u))},null,32),n("div",null,[n("label",null,[n("input",{type:"file",style:{display:"none"},onChange:t[1]||(t[1]=(...u)=>e.onFileSelect&&e.onFileSelect(...u)),accept:"image/*"},null,32),q])])],2)}var Y=F(X,[["render",B]]);const j=async e=>new Promise(t=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>{t(o)},o.src=e}),G=e=>{var t=Math.PI;return e*(t/180)};function K(e){for(let t=e.length-1;t>0;t--){const o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}return e}const J=W({components:{ImageSelect:Y},setup(){const e=a([]),t=a(!1),o=a(""),i=a("#000000"),l=a(150),r=a(150),u=a(1280),s=a(720),c=a(50),v=a(!0),U=a(!0),S=a(!1),$=a(!0),g=a(100),p=a(0),A=a(0);return{urls:e,wantToAddUrls:t,inputUrl:o,bgColor:i,spacingHorizontal:l,spacingVertical:r,canvasWidth:u,canvasHeight:s,imagesSize:c,imagesAlpha:g,randomizeOrder:v,randomizeAngle:U,indentEverySecondRow:$,tryToWrapAround:S,offsetHorizontal:p,offsetVertical:A}},methods:{removeUrl(e){this.urls=this.urls.filter((t,o)=>e!==o)},addUrlsStr(){const e=this.inputUrl.split(/[\n\r]+/).filter(t=>!!t);this.urls.push(...e)},onImageSelected(e){this.urls.push(...e),this.$refs.imageSelect.reset()},async generate(){const e=this.$refs.canvas;if(!e)return;const t=e.getContext("2d");if(!t)return;const o=parseInt(`${this.imagesSize}`,10),i=parseInt(`${this.imagesAlpha}`,10)/100,l=parseInt(`${this.spacingHorizontal}`,10),r=parseInt(`${this.spacingVertical}`,10);e.width=parseInt(`${this.canvasWidth}`,10),e.height=parseInt(`${this.canvasHeight}`,10);const u=parseInt(`${this.offsetHorizontal}`,10),s=parseInt(`${this.offsetVertical}`,10);t.fillStyle=this.bgColor,t.fillRect(0,0,e.width,e.height);const c=[];for(let g of this.urls)c.push(await j(g));let v=0,U=0,S=this.tryToWrapAround?0:-r,$=this.tryToWrapAround?0:-l;for(let g=S;g<e.height;g+=r){const p=g+s;let A=0;this.indentEverySecondRow&&(A=U%2===0?l/2:0);for(let _=$;_<e.width;_+=l){const m=_+A+u;v%this.urls.length===0&&this.randomizeOrder&&K(c);const f=c[v%this.urls.length],I=this.randomizeAngle?G(Math.random()*360):0,C=[[m,p]];this.tryToWrapAround&&C.push([m+e.width,p],[m-e.width,p],[m,p+e.height],[m,p-e.height],[m+e.width,p+e.height],[m-e.width,p-e.height],[m+e.width,p-e.height],[m-e.width,p+e.height]);let k,z;f.width<f.height?(k=o,z=o*f.height/f.width):(z=o,k=o*f.width/f.height);for(let[H,D]of C)t.save(),t.globalAlpha=i,t.translate(H,D),t.rotate(I),t.drawImage(f,-k/2,-z/2,k,z),t.rotate(-I),t.translate(-H,-D),t.restore();v++}U++}}}}),Q={class:"card"},Z={class:"panel-block"},x=w(" Add files by clicking "),ee=w(", dragging images on the browser, or by "),te=w(". "),ne={key:0,class:"fake-panel-block"},se=w(" Note: This may not always work for all external urls. "),le=n("br",null,null,-1),oe={key:1,class:"fake-panel-block"},ie=w(" Click on an image to remove it. "),re=n("br",null,null,-1),ae=["src","onClick"],de={class:"panel-block"},ue={class:"table"},pe=n("td",null,"bgColor",-1),he=n("td",null,null,-1),ce=n("td",null,"imagesSize",-1),me=n("td",null," Images are sized so that their smallest side becomes this value. They retain their original aspect ratio.",-1),ge=n("td",null,"imagesAlpha",-1),fe=n("td",null," Alpha of the images on the background (0 = Transparent, 100 = Opaque)",-1),ve=n("td",null,"spacingHorizontal",-1),ye=n("td",null,null,-1),be=n("td",null,"spacingVertical",-1),we=n("td",null,null,-1),Ue=n("td",null,"canvasWidth",-1),Ae=n("td",null,null,-1),ke=n("td",null,"canvasHeight",-1),ze=n("td",null,null,-1),Ve=n("td",null,"randomizeOrder",-1),Se=n("td",null,null,-1),$e=n("td",null,"randomizeAngle",-1),_e=n("td",null,null,-1),Ie=n("td",null,"offsetHorizontal",-1),Ce=n("td",null,null,-1),He=n("td",null,"offsetVertical",-1),De=n("td",null,null,-1),Te=n("td",null,"indentEverySecondRow",-1),Ee=n("td",null,[w(" If checked, every second row will be indented by half the "),n("code",null,"offsetHorizontal")],-1),We=n("td",null,"tryToWrapAround",-1),Fe=n("td",null," Create a background that can be repeated forever. For this to work, the canvas width/height should be equal, and a multiple of the spacing.",-1),Oe={class:"panel-block"},Le={ref:"canvas"};function Re(e,t,o,i,l,r){const u=L("image-select");return b(),y(E,null,[n("div",Q,[n("div",Z,[x,R(u,{onSelected:e.onImageSelected,ref:"imageSelect"},null,8,["onSelected"]),ee,n("span",{class:"button is-small",onClick:t[0]||(t[0]=s=>e.wantToAddUrls=!e.wantToAddUrls)},"adding urls"),te]),e.wantToAddUrls?(b(),y("div",ne,[se,le,d(n("textarea",{class:"textarea is-small mb-1","onUpdate:modelValue":t[1]||(t[1]=s=>e.inputUrl=s)},null,512),[[h,e.inputUrl]]),n("span",{class:"button is-small",onClick:t[2]||(t[2]=(...s)=>e.addUrlsStr&&e.addUrlsStr(...s))},"Add URL(s)")])):T("",!0),e.urls.length?(b(),y("div",oe,[ie,re,(b(!0),y(E,null,N(e.urls,(s,c)=>(b(),y("img",{key:c,width:"100",src:e.urls[c],onClick:v=>e.removeUrl(c),class:"is-clickable mr-1"},null,8,ae))),128))])):T("",!0),n("div",de,[n("table",ue,[n("tr",null,[pe,n("td",null,[d(n("input",{class:"input is-small",type:"color","onUpdate:modelValue":t[3]||(t[3]=s=>e.bgColor=s)},null,512),[[h,e.bgColor]])]),he]),n("tr",null,[ce,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>e.imagesSize=s)},null,512),[[h,e.imagesSize]])]),me]),n("tr",null,[ge,n("td",null,[d(n("input",{class:"input is-small",type:"number",min:"0",max:"100","onUpdate:modelValue":t[5]||(t[5]=s=>e.imagesAlpha=s)},null,512),[[h,e.imagesAlpha]])]),fe]),n("tr",null,[ve,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[6]||(t[6]=s=>e.spacingHorizontal=s)},null,512),[[h,e.spacingHorizontal]])]),ye]),n("tr",null,[be,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[7]||(t[7]=s=>e.spacingVertical=s)},null,512),[[h,e.spacingVertical]])]),we]),n("tr",null,[Ue,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[8]||(t[8]=s=>e.canvasWidth=s)},null,512),[[h,e.canvasWidth]])]),Ae]),n("tr",null,[ke,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[9]||(t[9]=s=>e.canvasHeight=s)},null,512),[[h,e.canvasHeight]])]),ze]),n("tr",null,[Ve,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=s=>e.randomizeOrder=s)},null,512),[[V,e.randomizeOrder]])]),Se]),n("tr",null,[$e,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=s=>e.randomizeAngle=s)},null,512),[[V,e.randomizeAngle]])]),_e]),n("tr",null,[Ie,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[12]||(t[12]=s=>e.offsetHorizontal=s)},null,512),[[h,e.offsetHorizontal]])]),Ce]),n("tr",null,[He,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[13]||(t[13]=s=>e.offsetVertical=s)},null,512),[[h,e.offsetVertical]])]),De]),n("tr",null,[Te,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=s=>e.indentEverySecondRow=s)},null,512),[[V,e.indentEverySecondRow]])]),Ee]),n("tr",null,[We,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=s=>e.tryToWrapAround=s)},null,512),[[V,e.tryToWrapAround]])]),Fe])])]),n("div",Oe,[n("span",{class:"button is-small",onClick:t[16]||(t[16]=(...s)=>e.generate&&e.generate(...s))},"Generate!!!!")])]),n("canvas",Le,null,512)],64)}var Ne=F(J,[["render",Re]]);const Me=async()=>{M(Ne).mount("#app")};Me();
