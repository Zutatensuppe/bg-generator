import{d as W,r as a,c as v,a as s,n as H,o as b,b as L,e as E,w as u,v as m,f as D,F as T,g as N,h as $,i as y,j as M}from"./vendor.07388c62.js";const P=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function l(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=l(n);fetch(n.href,i)}};P();var F=(e,t)=>{const l=e.__vccOpts||e;for(const[r,n]of t)l[r]=n;return l};const R=W({setup(){const e=a([]),t=a(!1);return{previewUrls:e,droppable:t}},mounted(){window.addEventListener("dragover",this.onDragover),window.addEventListener("drop",this.onDrop)},unmounted(){window.removeEventListener("dragover",this.onDragover),window.removeEventListener("drop",this.onDrop)},methods:{reset(){this.previewUrls=[],this.droppable=!1},onFileSelect(e){const t=e.target;if(!t.files)return;const l=[];for(let r=0;r<t.files.length;r++)l.push(t.files[r]);this.preview(l)},async preview(e){let t=[];for(let l of e)t.push(new Promise(r=>{const n=new FileReader;n.readAsDataURL(l),n.onload=i=>{r(i.target.result)}}));this.previewUrls=await Promise.all(t),this.$emit("selected",this.previewUrls)},imagesFromDragEvt(e){var r;const t=(r=e.dataTransfer)==null?void 0:r.items;if(!t||t.length===0)return[];const l=[];for(let n=0;n<t.length;n++)t[n].type.startsWith("image/")&&l.push(t[n]);return l},onDrop(e){this.droppable=!1;const t=this.imagesFromDragEvt(e);if(t.length===0)return!1;const l=[];for(const r of t){const n=r.getAsFile();n&&l.push(n)}return l.length===0||(this.preview(l),e.preventDefault()),!1},onDragover(e){return this.imagesFromDragEvt(e).length===0||(this.droppable=!0,e.preventDefault()),!1},onDragleave(){this.droppable=!1}}}),X=s("span",{class:"button is-small"},"Add File",-1);function q(e,t,l,r,n,i){return b(),v("div",{class:H(["image-select",{droppable:e.droppable}])},[s("div",{class:"drop-target",onDragleave:t[0]||(t[0]=(...d)=>e.onDragleave&&e.onDragleave(...d))},null,32),s("div",null,[s("label",null,[s("input",{type:"file",style:{display:"none"},onChange:t[1]||(t[1]=(...d)=>e.onFileSelect&&e.onFileSelect(...d)),accept:"image/*"},null,32),X])])],2)}var B=F(R,[["render",q]]);const Y=async e=>new Promise(t=>{const l=new Image;l.crossOrigin="anonymous",l.onload=()=>{t(l)},l.src=e}),j=e=>{var t=Math.PI;return e*(t/180)};function G(e){for(let t=e.length-1;t>0;t--){const l=Math.floor(Math.random()*(t+1));[e[t],e[l]]=[e[l],e[t]]}return e}const K=W({components:{ImageSelect:B},setup(){const e=a([]),t=a(!1),l=a(""),r=a("#000000"),n=a(150),i=a(1280),d=a(720),o=a(50),h=a(!0),w=a(!0),k=a(!1),z=a(100),g=a(0),p=a(0);return{urls:e,wantToAddUrls:t,inputUrl:l,bgColor:r,spacing:n,canvasWidth:i,canvasHeight:d,imagesSize:o,imagesAlpha:z,randomizeOrder:h,randomizeAngle:w,tryToWrapAround:k,offsetHorizontal:g,offsetVertical:p}},methods:{removeUrl(e){this.urls=this.urls.filter((t,l)=>e!==l)},addUrlsStr(){const e=this.inputUrl.split(/[\n\r]+/).filter(t=>!!t);this.urls.push(...e)},onImageSelected(e){this.urls.push(...e),this.$refs.imageSelect.reset()},async generate(){const e=this.$refs.canvas;if(!e)return;const t=e.getContext("2d");if(!t)return;const l=parseInt(`${this.imagesSize}`,10),r=parseInt(`${this.imagesAlpha}`,10)/100,n=parseInt(`${this.spacing}`,10);e.width=parseInt(`${this.canvasWidth}`,10),e.height=parseInt(`${this.canvasHeight}`,10);const i=parseInt(`${this.offsetHorizontal}`,10),d=parseInt(`${this.offsetVertical}`,10);t.fillStyle=this.bgColor,t.fillRect(0,0,e.width,e.height);const o=[];for(let g of this.urls)o.push(await Y(g));let h=0,w=0,k=this.tryToWrapAround?0:-n,z=this.tryToWrapAround?0:-n;for(let g=k;g<e.height;g+=n){const p=g+d,O=w%2===0?n/2:0;for(let _=z;_<e.width;_+=n){const c=_+O+i;h%this.urls.length===0&&this.randomizeOrder&&G(o);const f=o[h%this.urls.length],V=this.randomizeAngle?j(Math.random()*360):0,S=[[c,p]];this.tryToWrapAround&&S.push([c+e.width,p],[c-e.width,p],[c,p+e.height],[c,p-e.height],[c+e.width,p+e.height],[c-e.width,p-e.height],[c+e.width,p-e.height],[c-e.width,p+e.height]);let A,U;f.width<f.height?(A=l,U=l*f.height/f.width):(U=l,A=l*f.width/f.height);for(let[C,I]of S)t.save(),t.globalAlpha=r,t.translate(C,I),t.rotate(V),t.drawImage(f,-A/2,-U/2,A,U),t.rotate(-V),t.translate(-C,-I),t.restore();h++}w++}}}}),J={class:"card"},Q={class:"panel-block"},Z=y(" Add files by clicking "),x=y(", dragging images on the browser, or by "),ee=y(". "),te={key:0,class:"fake-panel-block"},se=y(" Note: This may not always work for all external urls. "),ne=s("br",null,null,-1),le={key:1,class:"fake-panel-block"},oe=y(" Click on an image to remove it. "),re=s("br",null,null,-1),ie=["src","onClick"],ae={class:"panel-block"},de={class:"table"},ue=s("td",null,"bgColor",-1),pe=s("td",null,null,-1),he=s("td",null,"imagesSize",-1),ce=s("td",null," Images are sized so that their smallest side becomes this value. They retain their original aspect ratio.",-1),me=s("td",null,"imagesAlpha",-1),ge=s("td",null," Alpha of the images on the background (0 = Transparent, 100 = Opaque)",-1),fe=s("td",null,"spacing",-1),ve=s("td",null,null,-1),be=s("td",null,"canvasWidth",-1),we=s("td",null,null,-1),ye=s("td",null,"canvasHeight",-1),Ae=s("td",null,null,-1),Ue=s("td",null,"randomizeOrder",-1),ke=s("td",null,null,-1),ze=s("td",null,"randomizeAngle",-1),_e=s("td",null,null,-1),$e=s("td",null,"offsetHorizontal",-1),Ve=s("td",null,null,-1),Se=s("td",null,"offsetVertical",-1),Ce=s("td",null,null,-1),Ie=s("td",null,"tryToWrapAround",-1),De=s("td",null," Create a background that can be repeated forever. For this to work, the canvas width/height should be equal, and a multiple of the spacing.",-1),Te={class:"panel-block"},We={ref:"canvas"};function Fe(e,t,l,r,n,i){const d=L("image-select");return b(),v(T,null,[s("div",J,[s("div",Q,[Z,E(d,{onSelected:e.onImageSelected,ref:"imageSelect"},null,8,["onSelected"]),x,s("span",{class:"button is-small",onClick:t[0]||(t[0]=o=>e.wantToAddUrls=!e.wantToAddUrls)},"adding urls"),ee]),e.wantToAddUrls?(b(),v("div",te,[se,ne,u(s("textarea",{class:"textarea is-small mb-1","onUpdate:modelValue":t[1]||(t[1]=o=>e.inputUrl=o)},null,512),[[m,e.inputUrl]]),s("span",{class:"button is-small",onClick:t[2]||(t[2]=(...o)=>e.addUrlsStr&&e.addUrlsStr(...o))},"Add URL(s)")])):D("",!0),e.urls.length?(b(),v("div",le,[oe,re,(b(!0),v(T,null,N(e.urls,(o,h)=>(b(),v("img",{key:h,width:"100",src:e.urls[h],onClick:w=>e.removeUrl(h),class:"is-clickable mr-1"},null,8,ie))),128))])):D("",!0),s("div",ae,[s("table",de,[s("tr",null,[ue,s("td",null,[u(s("input",{class:"input is-small",type:"color","onUpdate:modelValue":t[3]||(t[3]=o=>e.bgColor=o)},null,512),[[m,e.bgColor]])]),pe]),s("tr",null,[he,s("td",null,[u(s("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>e.imagesSize=o)},null,512),[[m,e.imagesSize]])]),ce]),s("tr",null,[me,s("td",null,[u(s("input",{class:"input is-small",type:"number",min:"0",max:"100","onUpdate:modelValue":t[5]||(t[5]=o=>e.imagesAlpha=o)},null,512),[[m,e.imagesAlpha]])]),ge]),s("tr",null,[fe,s("td",null,[u(s("input",{class:"input is-small","onUpdate:modelValue":t[6]||(t[6]=o=>e.spacing=o)},null,512),[[m,e.spacing]])]),ve]),s("tr",null,[be,s("td",null,[u(s("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[7]||(t[7]=o=>e.canvasWidth=o)},null,512),[[m,e.canvasWidth]])]),we]),s("tr",null,[ye,s("td",null,[u(s("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[8]||(t[8]=o=>e.canvasHeight=o)},null,512),[[m,e.canvasHeight]])]),Ae]),s("tr",null,[Ue,s("td",null,[u(s("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=o=>e.randomizeOrder=o)},null,512),[[$,e.randomizeOrder]])]),ke]),s("tr",null,[ze,s("td",null,[u(s("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=o=>e.randomizeAngle=o)},null,512),[[$,e.randomizeAngle]])]),_e]),s("tr",null,[$e,s("td",null,[u(s("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[11]||(t[11]=o=>e.offsetHorizontal=o)},null,512),[[m,e.offsetHorizontal]])]),Ve]),s("tr",null,[Se,s("td",null,[u(s("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[12]||(t[12]=o=>e.offsetVertical=o)},null,512),[[m,e.offsetVertical]])]),Ce]),s("tr",null,[Ie,s("td",null,[u(s("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=o=>e.tryToWrapAround=o)},null,512),[[$,e.tryToWrapAround]])]),De])])]),s("div",Te,[s("span",{class:"button is-small",onClick:t[14]||(t[14]=(...o)=>e.generate&&e.generate(...o))},"Generate!!!!")])]),s("canvas",We,null,512)],64)}var Oe=F(K,[["render",Fe]]);const He=async()=>{M(Oe).mount("#app")};He();
