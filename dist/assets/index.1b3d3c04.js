import{d as L,r,c as y,a as n,n as M,o as w,b as P,e as q,w as d,v as p,f as W,F,g as X,h as I,i as m,j as B}from"./vendor.07388c62.js";const Y=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}};Y();var N=(e,t)=>{const s=e.__vccOpts||e;for(const[i,o]of t)s[i]=o;return s};const j=L({setup(){const e=r([]),t=r(!1);return{previewUrls:e,droppable:t}},mounted(){window.addEventListener("dragover",this.onDragover),window.addEventListener("drop",this.onDrop)},unmounted(){window.removeEventListener("dragover",this.onDragover),window.removeEventListener("drop",this.onDrop)},methods:{reset(){this.previewUrls=[],this.droppable=!1},onFileSelect(e){const t=e.target;if(!t.files)return;const s=[];for(let i=0;i<t.files.length;i++)s.push(t.files[i]);this.preview(s)},async preview(e){let t=[];for(let s of e)t.push(new Promise(i=>{const o=new FileReader;o.readAsDataURL(s),o.onload=a=>{i(a.target.result)}}));this.previewUrls=await Promise.all(t),this.$emit("selected",this.previewUrls)},imagesFromDragEvt(e){var i;const t=(i=e.dataTransfer)==null?void 0:i.items;if(!t||t.length===0)return[];const s=[];for(let o=0;o<t.length;o++)t[o].type.startsWith("image/")&&s.push(t[o]);return s},onDrop(e){this.droppable=!1;const t=this.imagesFromDragEvt(e);if(t.length===0)return!1;const s=[];for(const i of t){const o=i.getAsFile();o&&s.push(o)}return s.length===0||(this.preview(s),e.preventDefault()),!1},onDragover(e){return this.imagesFromDragEvt(e).length===0||(this.droppable=!0,e.preventDefault()),!1},onDragleave(){this.droppable=!1}}}),G=n("span",{class:"button is-small"},"Add File",-1);function K(e,t,s,i,o,a){return w(),y("div",{class:M(["image-select",{droppable:e.droppable}])},[n("div",{class:"drop-target",onDragleave:t[0]||(t[0]=(...u)=>e.onDragleave&&e.onDragleave(...u))},null,32),n("div",null,[n("label",null,[n("input",{type:"file",style:{display:"none"},onChange:t[1]||(t[1]=(...u)=>e.onFileSelect&&e.onFileSelect(...u)),accept:"image/*"},null,32),G])])],2)}var J=N(j,[["render",K]]);const Q=async e=>new Promise(t=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{t(s)},s.src=e}),Z=e=>{var t=Math.PI;return e*(t/180)};function x(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}const ee=L({components:{ImageSelect:J},setup(){const e=r([]),t=r(!1),s=r(""),i=r("#000000"),o=r(150),a=r(150),u=r(1280),l=r(720),f=r(50),k=r(!0),A=r(!0),b=r("0"),U=r(!1),z=r(!0),$=r(100),_=r(100),h=r(0),c=r(0);return{urls:e,wantToAddUrls:t,inputUrl:s,bgColor:i,bgAlpha:_,spacingHorizontal:o,spacingVertical:a,canvasWidth:u,canvasHeight:l,imagesSize:f,imagesAlpha:$,randomizeOrder:k,randomizeAngle:A,fixedAngles:b,indentEverySecondRow:z,tryToWrapAround:U,offsetHorizontal:h,offsetVertical:c}},methods:{removeUrl(e){this.urls=this.urls.filter((t,s)=>e!==s)},addUrlsStr(){const e=this.inputUrl.split(/[\n\r]+/).filter(t=>!!t);this.urls.push(...e)},onImageSelected(e){this.urls.push(...e),this.$refs.imageSelect.reset()},async generate(){const e=this.$refs.canvas;if(!e)return;const t=e.getContext("2d");if(!t)return;const s=this.fixedAngles.split(",").map(h=>parseInt(h.trim(),10)).filter(h=>!isNaN(h));s.length===0&&s.push(0);const i=parseInt(`${this.imagesSize}`,10),o=parseInt(`${this.bgAlpha}`,10)/100,a=parseInt(`${this.imagesAlpha}`,10)/100,u=parseInt(`${this.spacingHorizontal}`,10),l=parseInt(`${this.spacingVertical}`,10);e.width=parseInt(`${this.canvasWidth}`,10),e.height=parseInt(`${this.canvasHeight}`,10);const f=parseInt(`${this.offsetHorizontal}`,10),k=parseInt(`${this.offsetVertical}`,10);t.save(),t.globalAlpha=o,t.fillStyle=this.bgColor,t.fillRect(0,0,e.width,e.height),t.restore();const A=[];for(let h of this.urls)A.push(await Q(h));let b=0,U=0,z=0,$=this.tryToWrapAround?0:-l,_=this.tryToWrapAround?0:-u;for(let h=$;h<e.height;h+=l){const c=h+k;let H=0;this.indentEverySecondRow&&(H=z%2===0?u/2:0);for(let C=_;C<e.width;C+=u){const g=C+H+f;U%this.urls.length===0&&this.randomizeOrder&&x(A);const v=A[U%this.urls.length],R=this.randomizeAngle?Math.random()*360:s[b];b+=1,b>=s.length&&(b=0);const T=Z(R),D=[[g,c]];this.tryToWrapAround&&D.push([g+e.width,c],[g-e.width,c],[g,c+e.height],[g,c-e.height],[g+e.width,c+e.height],[g-e.width,c-e.height],[g+e.width,c-e.height],[g-e.width,c+e.height]);let V,S;v.width<v.height?(V=i,S=i*v.height/v.width):(S=i,V=i*v.width/v.height);for(let[O,E]of D)t.save(),t.globalAlpha=a,t.translate(O,E),t.rotate(T),t.drawImage(v,-V/2,-S/2,V,S),t.rotate(-T),t.translate(-O,-E),t.restore();U++}z++}}}}),te={class:"card"},ne={class:"panel-block"},le=m(" Add files by clicking "),se=m(", dragging images on the browser, or by "),oe=m(". "),ie={key:0,class:"fake-panel-block"},re=m(" Note: This may not always work for all external urls. "),ae=n("br",null,null,-1),de={key:1,class:"fake-panel-block"},ue=m(" Click on an image to remove it. "),pe=n("br",null,null,-1),he=["src","onClick"],ce={class:"panel-block"},ge={class:"table"},me=n("td",null,"bgColor",-1),fe=n("td",null,null,-1),ve=n("td",null,"bgAlpha",-1),be=n("td",null," Alpha of the background (0 = Transparent, 100 = Opaque)",-1),ye=n("td",null,"imagesSize",-1),we=n("td",null," Images are sized so that their smallest side becomes this value. They retain their original aspect ratio.",-1),Ae=n("td",null,"imagesAlpha",-1),Ue=n("td",null," Alpha of the images on the background (0 = Transparent, 100 = Opaque)",-1),ke=n("td",null,"spacingHorizontal",-1),ze=n("td",null,null,-1),Ve=n("td",null,"spacingVertical",-1),Se=n("td",null,null,-1),Ie=n("td",null,"canvasWidth",-1),$e=n("td",null,null,-1),_e=n("td",null,"canvasHeight",-1),Ce=n("td",null,null,-1),He=n("td",null,"randomizeOrder",-1),Te=n("td",null,null,-1),De=n("td",null,"randomizeAngle",-1),Oe=n("td",null,null,-1),Ee=n("td",null,"fixedAngles",-1),We=n("td",null,[m("(Only has an effect if "),n("code",null,"randomizeAngle"),m(" is not checked.) Comma separated angles, for example "),n("code",null,"0, 45, -90, 90"),m(". They will be rotated through.")],-1),Fe=n("td",null,"offsetHorizontal",-1),Le=n("td",null,null,-1),Ne=n("td",null,"offsetVertical",-1),Re=n("td",null,null,-1),Me=n("td",null,"indentEverySecondRow",-1),Pe=n("td",null,[m(" If checked, every second row will be indented by half the "),n("code",null,"spacingHorizontal")],-1),qe=n("td",null,"tryToWrapAround",-1),Xe=n("td",null," Create a background that can be repeated forever. For this to work, the canvas width/height should be equal, and a multiple of the spacing.",-1),Be={class:"panel-block"},Ye={ref:"canvas"};function je(e,t,s,i,o,a){const u=P("image-select");return w(),y(F,null,[n("div",te,[n("div",ne,[le,q(u,{onSelected:e.onImageSelected,ref:"imageSelect"},null,8,["onSelected"]),se,n("span",{class:"button is-small",onClick:t[0]||(t[0]=l=>e.wantToAddUrls=!e.wantToAddUrls)},"adding urls"),oe]),e.wantToAddUrls?(w(),y("div",ie,[re,ae,d(n("textarea",{class:"textarea is-small mb-1","onUpdate:modelValue":t[1]||(t[1]=l=>e.inputUrl=l)},null,512),[[p,e.inputUrl]]),n("span",{class:"button is-small",onClick:t[2]||(t[2]=(...l)=>e.addUrlsStr&&e.addUrlsStr(...l))},"Add URL(s)")])):W("",!0),e.urls.length?(w(),y("div",de,[ue,pe,(w(!0),y(F,null,X(e.urls,(l,f)=>(w(),y("img",{key:f,width:"100",src:e.urls[f],onClick:k=>e.removeUrl(f),class:"is-clickable mr-1"},null,8,he))),128))])):W("",!0),n("div",ce,[n("table",ge,[n("tr",null,[me,n("td",null,[d(n("input",{class:"input is-small",type:"color","onUpdate:modelValue":t[3]||(t[3]=l=>e.bgColor=l)},null,512),[[p,e.bgColor]])]),fe]),n("tr",null,[ve,n("td",null,[d(n("input",{class:"input is-small",type:"number",min:"0",max:"100","onUpdate:modelValue":t[4]||(t[4]=l=>e.bgAlpha=l)},null,512),[[p,e.bgAlpha]])]),be]),n("tr",null,[ye,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[5]||(t[5]=l=>e.imagesSize=l)},null,512),[[p,e.imagesSize]])]),we]),n("tr",null,[Ae,n("td",null,[d(n("input",{class:"input is-small",type:"number",min:"0",max:"100","onUpdate:modelValue":t[6]||(t[6]=l=>e.imagesAlpha=l)},null,512),[[p,e.imagesAlpha]])]),Ue]),n("tr",null,[ke,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[7]||(t[7]=l=>e.spacingHorizontal=l)},null,512),[[p,e.spacingHorizontal]])]),ze]),n("tr",null,[Ve,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[8]||(t[8]=l=>e.spacingVertical=l)},null,512),[[p,e.spacingVertical]])]),Se]),n("tr",null,[Ie,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[9]||(t[9]=l=>e.canvasWidth=l)},null,512),[[p,e.canvasWidth]])]),$e]),n("tr",null,[_e,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[10]||(t[10]=l=>e.canvasHeight=l)},null,512),[[p,e.canvasHeight]])]),Ce]),n("tr",null,[He,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=l=>e.randomizeOrder=l)},null,512),[[I,e.randomizeOrder]])]),Te]),n("tr",null,[De,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=l=>e.randomizeAngle=l)},null,512),[[I,e.randomizeAngle]])]),Oe]),n("tr",null,[Ee,n("td",null,[d(n("input",{class:"input is-small","onUpdate:modelValue":t[13]||(t[13]=l=>e.fixedAngles=l)},null,512),[[p,e.fixedAngles]])]),We]),n("tr",null,[Fe,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[14]||(t[14]=l=>e.offsetHorizontal=l)},null,512),[[p,e.offsetHorizontal]])]),Le]),n("tr",null,[Ne,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[15]||(t[15]=l=>e.offsetVertical=l)},null,512),[[p,e.offsetVertical]])]),Re]),n("tr",null,[Me,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=l=>e.indentEverySecondRow=l)},null,512),[[I,e.indentEverySecondRow]])]),Pe]),n("tr",null,[qe,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=l=>e.tryToWrapAround=l)},null,512),[[I,e.tryToWrapAround]])]),Xe])])]),n("div",Be,[n("span",{class:"button is-small",onClick:t[18]||(t[18]=(...l)=>e.generate&&e.generate(...l))},"Generate!!!!")])]),n("canvas",Ye,null,512)],64)}var Ge=N(ee,[["render",je]]);const Ke=async()=>{B(Ge).mount("#app")};Ke();
