import{d as N,r,c as A,a as n,n as M,o as U,b as P,e as q,w as d,v as p,f as F,F as L,g as X,h as _,i as m,j as B}from"./vendor.07388c62.js";const Y=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=s(o);fetch(o.href,a)}};Y();var R=(e,t)=>{const s=e.__vccOpts||e;for(const[i,o]of t)s[i]=o;return s};const j=N({setup(){const e=r([]),t=r(!1);return{previewUrls:e,droppable:t}},mounted(){window.addEventListener("dragover",this.onDragover),window.addEventListener("drop",this.onDrop)},unmounted(){window.removeEventListener("dragover",this.onDragover),window.removeEventListener("drop",this.onDrop)},methods:{reset(){this.previewUrls=[],this.droppable=!1},onFileSelect(e){const t=e.target;if(!t.files)return;const s=[];for(let i=0;i<t.files.length;i++)s.push(t.files[i]);this.preview(s)},async preview(e){let t=[];for(let s of e)t.push(new Promise(i=>{const o=new FileReader;o.readAsDataURL(s),o.onload=a=>{i(a.target.result)}}));this.previewUrls=await Promise.all(t),this.$emit("selected",this.previewUrls)},imagesFromDragEvt(e){var i;const t=(i=e.dataTransfer)==null?void 0:i.items;if(!t||t.length===0)return[];const s=[];for(let o=0;o<t.length;o++)t[o].type.startsWith("image/")&&s.push(t[o]);return s},onDrop(e){this.droppable=!1;const t=this.imagesFromDragEvt(e);if(t.length===0)return!1;const s=[];for(const i of t){const o=i.getAsFile();o&&s.push(o)}return s.length===0||(this.preview(s),e.preventDefault()),!1},onDragover(e){return this.imagesFromDragEvt(e).length===0||(this.droppable=!0,e.preventDefault()),!1},onDragleave(){this.droppable=!1}}}),G=n("span",{class:"button is-small"},"Add File",-1);function K(e,t,s,i,o,a){return U(),A("div",{class:M(["image-select",{droppable:e.droppable}])},[n("div",{class:"drop-target",onDragleave:t[0]||(t[0]=(...u)=>e.onDragleave&&e.onDragleave(...u))},null,32),n("div",null,[n("label",null,[n("input",{type:"file",style:{display:"none"},onChange:t[1]||(t[1]=(...u)=>e.onFileSelect&&e.onFileSelect(...u)),accept:"image/*"},null,32),G])])],2)}var J=R(j,[["render",K]]);const Q=async e=>new Promise(t=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>{t(s)},s.src=e}),Z=e=>{var t=Math.PI;return e*(t/180)};function x(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}function ee(e,t){let s=Math.abs(e-t)%360;return s>180&&(s=360-s),s}const te=N({components:{ImageSelect:J},setup(){const e=r([]),t=r(!1),s=r(""),i=r("#000000"),o=r(150),a=r(150),u=r(1280),l=r(720),f=r(50),V=r(!0),k=r(!0),b=r("0"),y=r(!1),z=r(!0),S=r(100),C=r(100),D=r(0),h=r(0);return{urls:e,wantToAddUrls:t,inputUrl:s,bgColor:i,bgAlpha:C,spacingHorizontal:o,spacingVertical:a,canvasWidth:u,canvasHeight:l,imagesSize:f,imagesAlpha:S,randomizeOrder:V,randomizeAngle:k,fixedAngles:b,indentEverySecondRow:z,tryToWrapAround:y,offsetHorizontal:D,offsetVertical:h}},methods:{removeUrl(e){this.urls=this.urls.filter((t,s)=>e!==s)},addUrlsStr(){const e=this.inputUrl.split(/[\n\r]+/).filter(t=>!!t);this.urls.push(...e)},onImageSelected(e){this.urls.push(...e),this.$refs.imageSelect.reset()},async generate(){const e=this.$refs.canvas;if(!e)return;const t=e.getContext("2d");if(!t)return;const s=this.fixedAngles.split(",").map(h=>parseInt(h.trim(),10)).filter(h=>!isNaN(h));s.length===0&&s.push(0);const i=parseInt(`${this.imagesSize}`,10),o=parseInt(`${this.bgAlpha}`,10)/100,a=parseInt(`${this.imagesAlpha}`,10)/100,u=parseInt(`${this.spacingHorizontal}`,10),l=parseInt(`${this.spacingVertical}`,10);e.width=parseInt(`${this.canvasWidth}`,10),e.height=parseInt(`${this.canvasHeight}`,10);const f=parseInt(`${this.offsetHorizontal}`,10),V=parseInt(`${this.offsetVertical}`,10);t.save(),t.globalAlpha=o,t.fillStyle=this.bgColor,t.fillRect(0,0,e.width,e.height),t.restore();const k=[];for(let h of this.urls)k.push(await Q(h));let b=0,y=0,z=0,S=0,C=this.tryToWrapAround?0:-l,D=this.tryToWrapAround?0:-u;for(let h=C;h<e.height;h+=l){const c=h+V;let T=0;this.indentEverySecondRow&&(T=S%2===0?u/2:0);for(let H=D;H<e.width;H+=u){const g=H+T+f;z%this.urls.length===0&&this.randomizeOrder&&x(k);const v=k[z%this.urls.length];if(this.randomizeAngle){let w;do w=Math.random()*360;while(ee(w,b)<15);b=w}else b=s[y];y+=1,y>=s.length&&(y=0);const O=Z(b),E=[[g,c]];this.tryToWrapAround&&E.push([g+e.width,c],[g-e.width,c],[g,c+e.height],[g,c-e.height],[g+e.width,c+e.height],[g-e.width,c-e.height],[g+e.width,c-e.height],[g-e.width,c+e.height]);let I,$;v.width<v.height?(I=i,$=i*v.height/v.width):($=i,I=i*v.width/v.height);for(let[w,W]of E)t.save(),t.globalAlpha=a,t.translate(w,W),t.rotate(O),t.drawImage(v,-I/2,-$/2,I,$),t.rotate(-O),t.translate(-w,-W),t.restore();z++}S++}}}}),ne={class:"card"},le={class:"panel-block"},se=m(" Add files by clicking "),oe=m(", dragging images on the browser, or by "),ie=m(". "),re={key:0,class:"fake-panel-block"},ae=m(" Note: This may not always work for all external urls. "),de=n("br",null,null,-1),ue={key:1,class:"fake-panel-block"},pe=m(" Click on an image to remove it. "),he=n("br",null,null,-1),ce=["src","onClick"],ge={class:"panel-block"},me={class:"table"},fe=n("td",null,"bgColor",-1),ve=n("td",null,null,-1),be=n("td",null,"bgAlpha",-1),ye=n("td",null," Alpha of the background (0 = Transparent, 100 = Opaque)",-1),we=n("td",null,"imagesSize",-1),Ae=n("td",null," Images are sized so that their smallest side becomes this value. They retain their original aspect ratio.",-1),Ue=n("td",null,"imagesAlpha",-1),ke=n("td",null," Alpha of the images on the background (0 = Transparent, 100 = Opaque)",-1),ze=n("td",null,"spacingHorizontal",-1),Ve=n("td",null,null,-1),Se=n("td",null,"spacingVertical",-1),Ie=n("td",null,null,-1),$e=n("td",null,"canvasWidth",-1),_e=n("td",null,null,-1),Ce=n("td",null,"canvasHeight",-1),De=n("td",null,null,-1),He=n("td",null,"randomizeOrder",-1),Te=n("td",null,null,-1),Oe=n("td",null,"randomizeAngle",-1),Ee=n("td",null,null,-1),We=n("td",null,"fixedAngles",-1),Fe=n("td",null,[m("(Only has an effect if "),n("code",null,"randomizeAngle"),m(" is not checked.) Comma separated angles, for example "),n("code",null,"0, 45, -90, 90"),m(". They will be rotated through.")],-1),Le=n("td",null,"offsetHorizontal",-1),Ne=n("td",null,null,-1),Re=n("td",null,"offsetVertical",-1),Me=n("td",null,null,-1),Pe=n("td",null,"indentEverySecondRow",-1),qe=n("td",null,[m(" If checked, every second row will be indented by half the "),n("code",null,"spacingHorizontal")],-1),Xe=n("td",null,"tryToWrapAround",-1),Be=n("td",null," Create a background that can be repeated forever. For this to work, the canvas width/height should be equal, and a multiple of the spacing.",-1),Ye={class:"panel-block"},je={ref:"canvas"};function Ge(e,t,s,i,o,a){const u=P("image-select");return U(),A(L,null,[n("div",ne,[n("div",le,[se,q(u,{onSelected:e.onImageSelected,ref:"imageSelect"},null,8,["onSelected"]),oe,n("span",{class:"button is-small",onClick:t[0]||(t[0]=l=>e.wantToAddUrls=!e.wantToAddUrls)},"adding urls"),ie]),e.wantToAddUrls?(U(),A("div",re,[ae,de,d(n("textarea",{class:"textarea is-small mb-1","onUpdate:modelValue":t[1]||(t[1]=l=>e.inputUrl=l)},null,512),[[p,e.inputUrl]]),n("span",{class:"button is-small",onClick:t[2]||(t[2]=(...l)=>e.addUrlsStr&&e.addUrlsStr(...l))},"Add URL(s)")])):F("",!0),e.urls.length?(U(),A("div",ue,[pe,he,(U(!0),A(L,null,X(e.urls,(l,f)=>(U(),A("img",{key:f,width:"100",src:e.urls[f],onClick:V=>e.removeUrl(f),class:"is-clickable mr-1"},null,8,ce))),128))])):F("",!0),n("div",ge,[n("table",me,[n("tr",null,[fe,n("td",null,[d(n("input",{class:"input is-small",type:"color","onUpdate:modelValue":t[3]||(t[3]=l=>e.bgColor=l)},null,512),[[p,e.bgColor]])]),ve]),n("tr",null,[be,n("td",null,[d(n("input",{class:"input is-small",type:"number",min:"0",max:"100","onUpdate:modelValue":t[4]||(t[4]=l=>e.bgAlpha=l)},null,512),[[p,e.bgAlpha]])]),ye]),n("tr",null,[we,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[5]||(t[5]=l=>e.imagesSize=l)},null,512),[[p,e.imagesSize]])]),Ae]),n("tr",null,[Ue,n("td",null,[d(n("input",{class:"input is-small",type:"number",min:"0",max:"100","onUpdate:modelValue":t[6]||(t[6]=l=>e.imagesAlpha=l)},null,512),[[p,e.imagesAlpha]])]),ke]),n("tr",null,[ze,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[7]||(t[7]=l=>e.spacingHorizontal=l)},null,512),[[p,e.spacingHorizontal]])]),Ve]),n("tr",null,[Se,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[8]||(t[8]=l=>e.spacingVertical=l)},null,512),[[p,e.spacingVertical]])]),Ie]),n("tr",null,[$e,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[9]||(t[9]=l=>e.canvasWidth=l)},null,512),[[p,e.canvasWidth]])]),_e]),n("tr",null,[Ce,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[10]||(t[10]=l=>e.canvasHeight=l)},null,512),[[p,e.canvasHeight]])]),De]),n("tr",null,[He,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[11]||(t[11]=l=>e.randomizeOrder=l)},null,512),[[_,e.randomizeOrder]])]),Te]),n("tr",null,[Oe,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=l=>e.randomizeAngle=l)},null,512),[[_,e.randomizeAngle]])]),Ee]),n("tr",null,[We,n("td",null,[d(n("input",{class:"input is-small","onUpdate:modelValue":t[13]||(t[13]=l=>e.fixedAngles=l)},null,512),[[p,e.fixedAngles]])]),Fe]),n("tr",null,[Le,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[14]||(t[14]=l=>e.offsetHorizontal=l)},null,512),[[p,e.offsetHorizontal]])]),Ne]),n("tr",null,[Re,n("td",null,[d(n("input",{class:"input is-small",type:"number","onUpdate:modelValue":t[15]||(t[15]=l=>e.offsetVertical=l)},null,512),[[p,e.offsetVertical]])]),Me]),n("tr",null,[Pe,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=l=>e.indentEverySecondRow=l)},null,512),[[_,e.indentEverySecondRow]])]),qe]),n("tr",null,[Xe,n("td",null,[d(n("input",{type:"checkbox","onUpdate:modelValue":t[17]||(t[17]=l=>e.tryToWrapAround=l)},null,512),[[_,e.tryToWrapAround]])]),Be])])]),n("div",Ye,[n("span",{class:"button is-small",onClick:t[18]||(t[18]=(...l)=>e.generate&&e.generate(...l))},"Generate!!!!")])]),n("canvas",je,null,512)],64)}var Ke=R(te,[["render",Ge]]);const Je=async()=>{B(Ke).mount("#app")};Je();
